{% extends 'base.html' %}
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
<div class="col-md-6 offset-md-3">
    <div class="mainContent">
        <br/>
        <style>
            .centered-box-container {
                display: flex;
                flex-direction: column;
                flex-wrap: wrap; /* Allows items to wrap to the next line if there's not enough room */
                justify-content: center; /* Centers items horizontally */
                align-items: center; /* Centers items vertically */
                gap: 0px; /* Ensures there's no space between the boxes */
            }

            .background-box {
                background-color: white;
                padding: 4px;
                box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
                margin: 0; /* Removes space between boxes */
                width: 100%;
                overflow: hidden; /* Ensures the pseudo-element doesn't overflow */
            }
            .percentage-box {
                display: flex; /* Makes .percentage-box a flex container */
                justify-content: center; /* Centers children horizontally */
                align-items: center; /* Centers children vertically */
                flex-direction: column; /* Stacks children vertically */
                padding: 5px; 
                width: 100%;
                height: 100%;
                text-align: center; /* Centers text horizontally */
            }
            .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 1; /* Sit on top */
                left: 0;
                top: 0;
                width: 100%; /* Full width */
                height: 100%; /* Full height */
                overflow: auto; /* Enable scroll if needed */
                background-color: rgb(0,0,0); /* Fallback color */
                background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            }

            .modal-content {
                background-color: #312d38;
                margin: 15% auto; /* 15% from the top and centered */
                padding: 20px;
                border: 1px solid #888;
                width: 50%; /* Adjusted width */
                max-width: 600px; /* Optional: set a maximum width */
                position: relative;
            }

            .close {
                color: #ff0000;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                position: absolute; /* Position the close button */
                top: 10px; /* Adjust as needed */
                right: 20px; /* Adjust as needed */
            }

            .close:hover,
            .close:focus {
                color: black;
                text-decoration: none;
                cursor: pointer;
            }
            .horizontal-container {
                display: flex;
                justify-content: space-between;
                width: 100%;
            }

            .horizontal-container > div {
                flex: 1;
                text-align: center;
            }
            /* Responsive text scaling */
            .percentage-box h1 {
                font-size: 6vw; /* Adjust as needed */
            }

            .percentage-box h5, .percentage-box h6 {
                font-size: 3vw; /* Adjust as needed */
            }

            /* Media query for larger screens */
            @media (min-width: 768px) {
                .percentage-box h1 {
                    font-size: 2em; /* Adjust as needed */
                }

                .percentage-box h5, .percentage-box h6 {
                    font-size: 1em; /* Adjust as needed */
                }
            }

            .labelbox {
                flex: 1;
                text-align: center;
            }
            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                grid-template-rows: repeat(6, 1fr);
                gap: 5px; /* Adjust the gap between squares as needed */
            }

            .square {
                width: 40px; /* Adjust the size of the squares as needed */
                height: 40px;
                background-color: #ddd; /* Adjust the background color as needed */
                border: 1px solid #ccc; /* Optional: Add a border to the squares */
                display: flex;
                align-items: center;
                justify-content: center;
                color: black; /* Set text color to black */
            }
            .scroll-button {
                display: block;
                margin: 10px auto;
                padding: 10px;
                font-size: 20px;
                cursor: pointer;
            }

            .modal-buttons {
                position: absolute;
                top: 10px;
                right: 20px;
            }

            .arrow-button {
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                margin: 0 5px;
            }

            .arrow-button:hover {
                color: #888;
            }
        </style>

        <center><h1 style="color: black;">Physical</h1></center>
        <div class="centered-box-container">
            <div class="background-box">
                <div class="percentage-box" id="percentageBox">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox1">
                            <center><h1>{{ stretch_pct }}</h1></center>
                            <center><h4>{{ stretch_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_stretch7 }}/{{ stretch_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_stretch42 }}/{{ stretch_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_stretch84 }}/{{ stretch_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox2">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox2">
                            <center><h1>{{ mobility_pct }}</h1></center>
                            <center><h4>{{ mobility_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_mobility7 }}/{{ mobility_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_mobility42 }}/{{ mobility_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_mobility84 }}/{{ mobility_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox3">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox3">
                            <center><h1>{{ coordination_pct }}</h1></center>
                            <center><h5>{{ coordination_label }}</h5></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_coordination7 }}/{{ coordination_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_coordination42 }}/{{ coordination_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_coordination84 }}/{{ coordination_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox4">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox4">
                            <center><h1>{{ balance_pct }}</h1></center>
                            <center><h4>{{ balance_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_balance7 }}/{{ balance_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_balance42 }}/{{ balance_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_balance84 }}/{{ balance_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox5">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox5">
                            <center><h1>{{ speed_pct }}</h1></center>
                            <center><h4>{{ speed_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_speed7 }}/{{ speed_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_speed42 }}/{{ speed_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_speed84 }}/{{ speed_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox6">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox6">
                            <center><h1>{{ agility_pct }}</h1></center>
                            <center><h4>{{ agility_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_agility7 }}/{{ agility_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_agility42 }}/{{ agility_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_agility84 }}/{{ agility_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox7">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox7">
                            <center><h1>{{ breathwork_pct }}</h1></center>
                            <center><h4>{{ breathwork_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_breathwork7 }}/{{ breathwork_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_breathwork42 }}/{{ breathwork_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_breathwork84 }}/{{ breathwork_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox8">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox8">
                            <center><h1>{{ strength_pct }}</h1></center>
                            <center><h4>{{ strength_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_strength7 }}/{{ strength_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_strength42 }}/{{ strength_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_strength84 }}/{{ strength_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox9">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox9">
                            <center><h1>{{ power_pct }}</h1></center>
                            <center><h4>{{ power_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_power7 }}/{{ power_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_power42 }}/{{ power_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_power84 }}/{{ power_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox10">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox10">
                            <center><h1>{{ reaction_pct }}</h1></center>
                            <center><h4>{{ reaction_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_reaction7 }}/{{ reaction_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_reaction42 }}/{{ reaction_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_reaction84 }}/{{ reaction_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/><hr/>
        <center><h1 style="color: black;">Mental</h1></center>
        <div class="centered-box-container">
            <div class="background-box">
                <div class="percentage-box" id="percentageBox11">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox11">
                            <center><h1>{{ stress_pct }}</h1></center>
                            <center><h4>Stress</h4></center>
                        </div>
                        <div>
                            <center><h5>Low Days (Week)</h5></center>
                            <center><h1>{{ stress12 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>Med Days (Week)</h5></center>
                            <center><h1>{{ stress3 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>High Days (Week)</h5></center>
                            <center><h1>{{ stress45 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox12">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox12">
                            <center><h1>{{ motivation_pct }}</h1></center>
                            <center><h5>Motivation</h5></center>
                        </div>
                        <div>
                            <center><h5>Low Days (Week)</h5></center>
                            <center><h1>{{ motivation12 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>Neutral Days (Week)</h5></center>
                            <center><h1>{{ motivation3 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>High Days (Week)</h5></center>
                            <center><h1>{{ motivation45 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox13">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox13">
                            <center><h1>{{ read_pct }}</h1></center>
                            <center><h4>{{ read_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_read7 }}/{{ read_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_read42 }}/{{ read_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_read84 }}/{{ read_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox14">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox14">
                            <center><h1>{{ kindness_pct }}</h1></center>
                            <center><h4>{{ kindness_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_kindness7 }}/{{ kindness_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_kindness42 }}/{{ kindness_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_kindness84 }}/{{ kindness_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox15">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox15">
                            <center><h1>{{ visualize_pct }}</h1></center>
                            <center><h4>{{ visualize_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_visualize7 }}/{{ visualize_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_visualize42 }}/{{ visualize_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_visualize84 }}/{{ visualize_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox16">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox16">
                            <center><h1>{{ medidate_pct }}</h1></center>
                            <center><h4>{{ medidate_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_medidate7 }}/{{ medidate_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_medidate42 }}/{{ medidate_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_medidate84 }}/{{ medidate_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox17">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox17">
                            <center><h1>{{ focus_pct }}</h1></center>
                            <center><h4>{{ focus_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_focus7 }}/{{ focus_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_focus42 }}/{{ focus_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_focus84 }}/{{ focus_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox18">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox18">
                            <center><h1>{{ be_social_pct }}</h1></center>
                            <center><h4>{{ be_social_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_be_social7 }}/{{ be_social_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_be_social42 }}/{{ be_social_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_be_social84 }}/{{ be_social_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/><hr/>
        <center><h1 style="color: black;">Recovery</h1></center>
        <!-- <canvas id="sleepChart" width="400" height="200"></canvas> -->
        <div class="centered-box-container">
            <div class="background-box">
                <div class="percentage-box" id="percentageBox19">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox19">
                            <center><h1>{{ sleep_pct }}</h1></center>
                            <center><h4>{{ sleep_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_sleep7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_sleep42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_sleep84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox20">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox20">
                            <center><h1>{{ massage_pct }}</h1></center>
                            <center><h4>{{ massage_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_massage7 }}/{{ massage_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_massage42 }}/{{ massage_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_massage84 }}/{{ massage_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox21">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox21">
                            <center><h1>{{ massage_pct }}</h1></center>
                            <center><h4>Normatec+</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_massage7 }}/{{ massage_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_massage42 }}/{{ massage_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_massage84 }}/{{ massage_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox22">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox22">
                            <center><h1>{{ massage_pct }}</h1></center>
                            <center><h4>Ice</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_massage7 }}/{{ massage_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_massage42 }}/{{ massage_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_massage84 }}/{{ massage_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox23">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox23">
                            <center><h1>{{ massage_pct }}</h1></center>
                            <center><h4>Altitude</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_massage7 }}/{{ massage_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_massage42 }}/{{ massage_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_massage84 }}/{{ massage_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox24">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox24">
                            <center><h1>{{ soreness_pct }}</h1></center>
                            <center><h4>Soreness</h4></center>
                        </div>
                        <div>
                            <center><h5>1's This Week</h5></center>
                            <center><h1>{{ soreness1 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>2's This Week</h5></center>
                            <center><h1>{{ soreness2 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>3's This Week</h5></center>
                            <center><h1>{{ soreness3 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox25">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox25">
                            <center><h1>{{ fatigue_pct }}</h1></center>
                            <center><h4>Fatigue</h4></center>
                        </div>
                        <div>
                            <center><h5>1's This Week</h5></center>
                            <center><h1>{{ fatigue1 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>2's This Week</h5></center>
                            <center><h1>{{ fatigue2 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>3's This Week</h5></center>
                            <center><h1>{{ fatigue3 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox26">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox26">
                            <center><h1>{{ illness_pct }}</h1></center>
                            <center><h4>Illness</h4></center>
                        </div>
                        <div>
                            <center><h5>1's This Week</h5></center>
                            <center><h1>{{ illness1 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>2's This Week</h5></center>
                            <center><h1>{{ illness2 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>3's This Week</h5></center>
                            <center><h1>{{ illness3 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox27">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox27">
                            <center><h1>{{ injury_pct }}</h1></center>
                            <center><h4>Injury</h4></center>
                        </div>
                        <div>
                            <center><h5>1's This Week</h5></center>
                            <center><h1>{{ injury1 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>2's This Week</h5></center>
                            <center><h1>{{ injury2 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>3's This Week</h5></center>
                            <center><h1>{{ injury3 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/><hr/>
        <center><h1 style="color: black;">Nutrition</h1></center>
        <!-- <canvas id="waterChart" width="400" height="200"></canvas> -->
        <div class="centered-box-container">
            <div class="background-box">
                <div class="percentage-box" id="percentageBox28">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox28">
                            <center><h1>{{ hydration_pct }}</h1></center>
                            <center><h4>{{ hydration_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_hydration7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_hydration42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_hydration84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox29">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox29">
                            <center><h1>{{ no_sweets_pct }}</h1></center>
                            <center><h4>{{ no_sweets_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_no_sweets7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_no_sweets42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_no_sweets84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox30">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox30">
                            <center><h1>{{ beta_alanine_pct }}</h1></center>
                            <center><h4>{{ beta_alanine_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_beta_alanine7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_beta_alanine42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_beta_alanine84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox31">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox31">
                            <center><h1>{{ creatine_pct }}</h1></center>
                            <center><h4>{{ creatine_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_creatine7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_creatine42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_creatine84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-box">
                <div class="percentage-box" id="percentageBox32">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox32">
                            <center><h1>{{ vitamin_d_pct }}</h1></center>
                            <center><h4>{{ vitamin_d_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_vitamin_d7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_vitamin_d42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_vitamin_d84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="background-box">
                <div class="percentage-box" id="percentageBox33">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox33">
                            <center><h1>{{ massage_pct }}</h1></center>
                            <center><h4>Anti Ox</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_massage7 }}/{{ massage_limit }}</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_massage42 }}/{{ massage_limit42 }}</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_massage84 }}/{{ massage_limit84 }}</h1></center>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="background-box">
                <div class="percentage-box" id="percentageBox34">
                    <div class="horizontal-container">
                        <div class="labelbox" id="labelbox34">
                            <center><h1>{{ fruit_pct }}</h1></center>
                            <center><h4>{{ fruit_label }}</h4></center>
                        </div>
                        <div>
                            <center><h5>Week</h5></center>
                            <center><h1>{{ true_fruit7 }}/7</h1></center>
                        </div>
                        <div>
                            <center><h5>6-Week</h5></center>
                            <center><h1>{{ true_fruit42 }}/42</h1></center>
                        </div>
                        <div>
                            <center><h5>12-Week</h5></center>
                            <center><h1>{{ true_fruit84 }}/84</h1></center>
                        </div>
                    </div>
                </div>
            </div>
                <div class="background-box">
                    <div class="percentage-box" id="percentageBox35">
                        <div class="horizontal-container">
                            <div class="labelbox" id="labelbox35">
                                <center><h1>{{ vegetable_pct }}</h1></center>
                                <center><h4>{{ vegetable_label }}</h4></center>
                            </div>
                            <div>
                                <center><h5>Week</h5></center>
                                <center><h1>{{ true_vegetable7 }}/7</h1></center>
                            </div>
                            <div>
                                <center><h5>6-Week</h5></center>
                                <center><h1>{{ true_vegetable42 }}/42</h1></center>
                            </div>
                            <div>
                                <center><h5>12-Week</h5></center>
                                <center><h1>{{ true_vegetable84 }}/84</h1></center>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function applyGradientStyles(elementId, percentage) {
        const startColor = { r: 255, g: 0, b: 0 }; // Light red
        const middleColor = { r: 255, g: 255, b: 0 }; // Light yellow
        const endColor = { r: 119, g: 199, b: 136 }; // Light green
        const startColor2 = { r: 151, g: 0, b: 0 }; // Dark red
        const middleColor2 = { r: 151, g: 128, b: 0 }; // Dark yellow
        const endColor2 = { r: 0, g: 151, b: 0 }; // Dark green

        let color;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color = {
                r: Math.round(startColor.r + (middleColor.r - startColor.r) * factor),
                g: Math.round(startColor.g + (middleColor.g - startColor.g) * factor),
                b: Math.round(startColor.b + (middleColor.b - startColor.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color = {
                r: Math.round(middleColor.r + (endColor.r - middleColor.r) * factor),
                g: Math.round(middleColor.g + (endColor.g - middleColor.g) * factor),
                b: Math.round(middleColor.b + (endColor.b - middleColor.b) * factor),
            };
        }

        let color2;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color2 = {
                r: Math.round(startColor2.r + (middleColor2.r - startColor2.r) * factor),
                g: Math.round(startColor2.g + (middleColor2.g - startColor2.g) * factor),
                b: Math.round(startColor2.b + (middleColor2.b - startColor2.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color2 = {
                r: Math.round(middleColor2.r + (endColor2.r - middleColor2.r) * factor),
                g: Math.round(middleColor2.g + (endColor2.g - middleColor2.g) * factor),
                b: Math.round(middleColor2.b + (endColor2.b - middleColor2.b) * factor),
            };
        }

        const rgbaColor = `rgba(${color.r}, ${color.g}, ${color.b}, 0.33)`; // For background with transparency
        const rgbColor = `rgb(${color2.r}, ${color2.g}, ${color2.b})`; // For text, border, and shadow

        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
    }

    function applyGradientStyles2(elementId, percentage) {
        const startColor = { r: 255, g: 0, b: 0 }; // Light red
        const middleColor = { r: 255, g: 255, b: 0 }; // Light yellow
        const endColor = { r: 119, g: 199, b: 136 }; // Light green
        const startColor2 = { r: 151, g: 0, b: 0 }; // Dark red
        const middleColor2 = { r: 151, g: 128, b: 0 }; // Dark yellow
        const endColor2 = { r: 0, g: 151, b: 0 }; // Dark green

        let color;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color = {
                r: Math.round(startColor.r + (middleColor.r - startColor.r) * factor),
                g: Math.round(startColor.g + (middleColor.g - startColor.g) * factor),
                b: Math.round(startColor.b + (middleColor.b - startColor.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color = {
                r: Math.round(middleColor.r + (endColor.r - middleColor.r) * factor),
                g: Math.round(middleColor.g + (endColor.g - middleColor.g) * factor),
                b: Math.round(middleColor.b + (endColor.b - middleColor.b) * factor),
            };
        }

        let color2;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color2 = {
                r: Math.round(startColor2.r + (middleColor2.r - startColor2.r) * factor),
                g: Math.round(startColor2.g + (middleColor2.g - startColor2.g) * factor),
                b: Math.round(startColor2.b + (middleColor2.b - startColor2.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color2 = {
                r: Math.round(middleColor2.r + (endColor2.r - middleColor2.r) * factor),
                g: Math.round(middleColor2.g + (endColor2.g - middleColor2.g) * factor),
                b: Math.round(middleColor2.b + (endColor2.b - middleColor2.b) * factor),
            };
        }

        const rgbaColor = `rgba(${color2.r}, ${color2.g}, ${color2.b}, 0.33)`; // For background with transparency
        const rgbColor = `rgb(${color2.r}, ${color2.g}, ${color2.b})`; // For text, border, and shadow

        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
    }

    function applyNeutralStyle(elementId) {
        const rgbaColor = 'rgba(124, 0, 161, 0.33)'; // Light gray
        const rgbColor = 'rgb(100, 0, 100)'; // Black
        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
        box.style.borderRadius = '5px'; // Add rounded corners

    }
    function applyNeutralStyle2(elementId) {
        const rgbaColor = 'rgba(124, 0, 161, 0.33)'; // Light gray
        const rgbColor = 'rgb(100, 0, 100)'; // Black
        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
        box.style.borderRadius = '5px'; // Add rounded corners
    }

    function applyReversedGradientStyles(elementId, value) {
        const startColor = { r: 119, g: 199, b: 136 }; // Light green
        const middleColor = { r: 255, g: 255, b: 0 }; // Light yellow
        const endColor = { r: 255, g: 0, b: 0 }; // Light red
        const startColor2 = { r: 0, g: 151, b: 0 }; // Dark green
        const middleColor2 = { r: 151, g: 128, b: 0 }; // Dark yellow
        const endColor2 = { r: 151, g: 0, b: 0 }; // Dark red

        const percentage = value / 3; // Convert value to a percentage between 0 and 1

        let color;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color = {
                r: Math.round(startColor.r + (middleColor.r - startColor.r) * factor),
                g: Math.round(startColor.g + (middleColor.g - startColor.g) * factor),
                b: Math.round(startColor.b + (middleColor.b - startColor.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color = {
                r: Math.round(middleColor.r + (endColor.r - middleColor.r) * factor),
                g: Math.round(middleColor.g + (endColor.g - middleColor.g) * factor),
                b: Math.round(middleColor.b + (endColor.b - middleColor.b) * factor),
            };
        }

        let color2;
        if (percentage <= 0.5) {
            // Interpolate between startColor2 and middleColor2
            const factor = percentage * 2;
            color2 = {
                r: Math.round(startColor2.r + (middleColor2.r - startColor2.r) * factor),
                g: Math.round(startColor2.g + (middleColor2.g - startColor2.g) * factor),
                b: Math.round(startColor2.b + (middleColor2.b - startColor2.b) * factor),
            };
        } else {
            // Interpolate between middleColor2 and endColor2
            const factor = (percentage - 0.5) * 2;
            color2 = {
                r: Math.round(middleColor2.r + (endColor2.r - middleColor2.r) * factor),
                g: Math.round(middleColor2.g + (endColor2.g - middleColor2.g) * factor),
                b: Math.round(middleColor2.b + (endColor2.b - middleColor2.b) * factor),
            };
        }

        const rgbaColor = `rgba(${color.r}, ${color.g}, ${color.b}, 0.33)`; // For background with transparency
        const rgbColor = `rgb(${color2.r}, ${color2.g}, ${color2.b})`; // For text, border, and shadow

        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
    }

    function applyReversedGradientStyles2(elementId, value) {
        const startColor = { r: 119, g: 199, b: 136 }; // Light green
        const middleColor = { r: 255, g: 255, b: 0 }; // Light yellow
        const endColor = { r: 255, g: 0, b: 0 }; // Light red
        const startColor2 = { r: 0, g: 151, b: 0 }; // Dark green
        const middleColor2 = { r: 151, g: 128, b: 0 }; // Dark yellow
        const endColor2 = { r: 151, g: 0, b: 0 }; // Dark red

        const percentage = value / 3; // Convert value to a percentage between 0 and 1

        let color;
        if (percentage <= 0.5) {
            // Interpolate between startColor and middleColor
            const factor = percentage * 2;
            color = {
                r: Math.round(startColor.r + (middleColor.r - startColor.r) * factor),
                g: Math.round(startColor.g + (middleColor.g - startColor.g) * factor),
                b: Math.round(startColor.b + (middleColor.b - startColor.b) * factor),
            };
        } else {
            // Interpolate between middleColor and endColor
            const factor = (percentage - 0.5) * 2;
            color = {
                r: Math.round(middleColor.r + (endColor.r - middleColor.r) * factor),
                g: Math.round(middleColor.g + (endColor.g - middleColor.g) * factor),
                b: Math.round(middleColor.b + (endColor.b - middleColor.b) * factor),
            };
        }

        let color2;
        if (percentage <= 0.5) {
            // Interpolate between startColor2 and middleColor2
            const factor = percentage * 2;
            color2 = {
                r: Math.round(startColor2.r + (middleColor2.r - startColor2.r) * factor),
                g: Math.round(startColor2.g + (middleColor2.g - startColor2.g) * factor),
                b: Math.round(startColor2.b + (middleColor2.b - startColor2.b) * factor),
            };
        } else {
            // Interpolate between middleColor2 and endColor2
            const factor = (percentage - 0.5) * 2;
            color2 = {
                r: Math.round(middleColor2.r + (endColor2.r - middleColor2.r) * factor),
                g: Math.round(middleColor2.g + (endColor2.g - middleColor2.g) * factor),
                b: Math.round(middleColor2.b + (endColor2.b - middleColor2.b) * factor),
            };
        }

        const rgbaColor = `rgba(${color.r}, ${color.g}, ${color.b}, 0.33)`; // For background with transparency
        const rgbColor = `rgb(${color2.r}, ${color2.g}, ${color2.b})`; // For text, border, and shadow

        const box = document.getElementById(elementId);
        box.style.backgroundColor = rgbaColor;
        box.style.color = rgbColor; // Set text color
        box.style.borderColor = rgbColor; // Set border color
        box.style.boxShadow = `0px 0px 5px ${rgbColor}`; // Set shadow
    }

    // Apply to specific elements
    applyGradientStyles('percentageBox', {{ stretch_pct }});
    applyGradientStyles2('labelbox1', {{ stretch_pct }});
    applyGradientStyles('percentageBox2', {{ mobility_pct }});
    applyGradientStyles2('labelbox2', {{ mobility_pct }});
    applyGradientStyles('percentageBox3', {{ coordination_pct }});
    applyGradientStyles2('labelbox3', {{ coordination_pct }});
    applyGradientStyles('percentageBox4', {{balance_pct}});
    applyGradientStyles2('labelbox4', {{balance_pct}});
    applyGradientStyles('percentageBox5', {{ speed_pct }});
    applyGradientStyles2('labelbox5', {{ speed_pct }});
    applyGradientStyles('percentageBox6', {{ agility_pct }});
    applyGradientStyles2('labelbox6', {{ agility_pct }});
    applyGradientStyles('percentageBox7', {{ breathwork_pct }});
    applyGradientStyles2('labelbox7', {{ breathwork_pct }});
    applyGradientStyles('percentageBox8', {{ strength_pct }});
    applyGradientStyles2('labelbox8', {{ strength_pct }});
    applyGradientStyles('percentageBox9', {{ power_pct }});
    applyGradientStyles2('labelbox9', {{ power_pct }});
    applyGradientStyles('percentageBox10', {{ reaction_pct }});
    applyGradientStyles2('labelbox10', {{ reaction_pct }});
    applyNeutralStyle('percentageBox11');
    applyNeutralStyle2('labelbox11');
    applyNeutralStyle('percentageBox12');
    applyNeutralStyle2('labelbox12');
    applyGradientStyles('percentageBox13', {{ read_pct }});
    applyGradientStyles2('labelbox13', {{ read_pct }});
    applyGradientStyles('percentageBox14', {{ kindness_pct }});
    applyGradientStyles2('labelbox14', {{ kindness_pct }});
    applyGradientStyles('percentageBox15', {{ visualize_pct }});
    applyGradientStyles2('labelbox15', {{ visualize_pct }});
    applyGradientStyles('percentageBox16', {{ medidate_pct }});
    applyGradientStyles2('labelbox16', {{ medidate_pct }});
    applyGradientStyles('percentageBox17', {{ focus_pct }});
    applyGradientStyles2('labelbox17', {{ focus_pct }});
    applyGradientStyles('percentageBox18', {{ be_social_pct }});
    applyGradientStyles2('labelbox18', {{ be_social_pct }});
    applyGradientStyles('percentageBox19', {{ sleep_pct }});
    applyGradientStyles2('labelbox19', {{ sleep_pct }});
    applyGradientStyles('percentageBox20', {{ massage_pct }});
    applyGradientStyles2('labelbox20', {{ massage_pct }});
    applyNeutralStyle('percentageBox21');
    applyNeutralStyle2('labelbox21');
    applyNeutralStyle('percentageBox22');
    applyNeutralStyle2('labelbox22');
    applyNeutralStyle('percentageBox23');
    applyNeutralStyle2('labelbox23');
    applyReversedGradientStyles('percentageBox24', {{ soreness_pct }});
    applyReversedGradientStyles2('labelbox24', {{ soreness_pct }});
    applyReversedGradientStyles('percentageBox25', {{ fatigue_pct }});
    applyReversedGradientStyles2('labelbox25', {{ fatigue_pct }});
    applyReversedGradientStyles('percentageBox26', {{ illness_pct }});
    applyReversedGradientStyles2('labelbox26', {{ illness_pct }});
    applyReversedGradientStyles('percentageBox27', {{ injury_pct }});
    applyReversedGradientStyles2('labelbox27', {{ injury_pct }});
    applyGradientStyles('percentageBox28', {{ hydration_pct }});
    applyGradientStyles2('labelbox28', {{ hydration_pct }});
    applyGradientStyles('percentageBox29', {{ no_sweets_pct }});
    applyGradientStyles2('labelbox29', {{ no_sweets_pct }});
    applyGradientStyles('percentageBox30', {{ beta_alanine_pct }});
    applyGradientStyles2('labelbox30', {{ beta_alanine_pct }});
    applyGradientStyles('percentageBox31', {{ creatine_pct }});
    applyGradientStyles2('labelbox31', {{ creatine_pct }});
    applyGradientStyles('percentageBox32', {{ vitamin_d_pct }});
    applyGradientStyles2('labelbox32', {{ vitamin_d_pct }});
    // applyGradientStyles('percentageBox33', 1);
    // applyGradientStyles2('labelbox33', 1);
    applyGradientStyles('percentageBox34', {{ fruit_pct }});
    applyGradientStyles2('labelbox34', {{ fruit_pct }});
    applyGradientStyles('percentageBox35', {{ vegetable_pct }});
    applyGradientStyles2('labelbox35', {{ vegetable_pct }});
</script>

<!-- Hydration Modal Box -->
<div id="hydrationModal" class="modal">
    <div class="modal-content">
        <p id="hydrationModalTitle">Hydration History</p>
        <div class="modal-buttons">
            <button id="leftArrow" class="arrow-button">&larr;</button>
            <button id="rightArrow" class="arrow-button">&rarr;</button>
        </div>
        <canvas id="hydrationChart"></canvas>
    </div>
</div>

<script>
    document.getElementById('percentageBox28').onclick = function() {
        document.getElementById('hydrationModal').style.display = "block";
        buildHydrationChart();
    }

    let startDate = new Date();
    startDate.setDate(startDate.getDate() - 42); // Start date 6 weeks ago
    let hydrationChart; // Reference to the chart instance

    function buildHydrationChart() {
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log('dailyData:', dailyData);

        // Filter the dailyData to include only entries within the date range
        const filteredData = Object.entries(dailyData).filter(([dateString, _]) => {
            const date = new Date(dateString);
            return date >= startDate && date <= new Date();
        });

        // Sort the filtered data by date
        filteredData.sort((a, b) => new Date(a[0]) - new Date(b[0]));

        // Extract dates and hydration values
        const dates = filteredData.map(entry => entry[0]);
        const hydrationValues = filteredData.map(entry => entry[1].hydration);

        const data = {
            labels: dates,
            datasets: [{
                label: 'Water Intake',
                data: hydrationValues,
                fill: true,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1,
                backgroundColor: 'rgba(75, 192, 192, 0.2)' // Adjust for shading
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        title: {
                            display: true,
                            text: 'Date'
                        }
                    },
                    y: {
                        beginAtZero: true, // Always start y-axis at zero
                        min: 0, // Ensure y-axis starts at zero
                        max: 175, // Set max value for y-axis
                        title: {
                            display: true,
                            text: 'Ounces'
                        }
                    }
                },
                plugins: {
                    annotation: {
                        annotations: {
                            line1: {
                                type: 'line',
                                yMin: 100,
                                yMax: 100,
                                borderColor: 'rgb(0, 99, 132)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                            }
                        }
                    }
                }
            }
        };

        const ctx = document.getElementById('hydrationChart').getContext('2d');
        if (hydrationChart) {
            hydrationChart.destroy(); // Destroy the existing chart instance
        }
        hydrationChart = new Chart(ctx, config); // Create a new chart instance
    }

    document.getElementById('leftArrow').onclick = function() {
        startDate.setDate(startDate.getDate() - 7);
        buildHydrationChart();
    }

    document.getElementById('rightArrow').onclick = function() {
        startDate.setDate(startDate.getDate() + 7);
        buildHydrationChart();
    }
</script>

<!-- Sleep Modal Box -->
<div id="sleepModal" class="modal">
    <div class="modal-content">
        <p id="sleepModalTitle">Sleep History</p>
        <div class="modal-buttons">
            <button id="leftArrowSleep" class="arrow-button">&larr;</button>
            <button id="rightArrowSleep" class="arrow-button">&rarr;</button>
        </div>
        <canvas id="sleepChart"></canvas>
    </div>
</div>
<script>
    document.getElementById('percentageBox19').onclick = function() {
        document.getElementById('sleepModal').style.display = "block";
        buildSleepChart();
    }

    let sleepStartDate = new Date();
    sleepStartDate.setDate(sleepStartDate.getDate() - 42); // Start date 6 weeks ago
    let sleepChart; // Reference to the chart instance

    function buildSleepChart() {
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log('dailyData:', dailyData);

        // Filter the dailyData to include only entries within the date range
        const filteredData = Object.entries(dailyData).filter(([dateString, _]) => {
            const date = new Date(dateString);
            return date >= sleepStartDate && date <= new Date();
        });

        // Sort the filtered data by date
        filteredData.sort((a, b) => new Date(a[0]) - new Date(b[0]));

        // Extract dates and sleep values
        const dates = filteredData.map(entry => entry[0]);
        const sleepValues = filteredData.map(entry => entry[1].sleep);

        const data = {
            labels: dates,
            datasets: [{
                label: 'Sleep',
                data: sleepValues,
                fill: true,
                borderColor: 'rgb(133, 31, 192)',
                tension: 0.1,
                backgroundColor: 'rgba(133, 31, 192, 0.2)' // Adjust for shading
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        title: {
                            display: true,
                            text: 'Date'
                        }
                    },
                    y: {
                        beginAtZero: false,
                        min: 4, // Set y scale from 4
                        max: 12, // to 12
                        title: {
                            display: true,
                            text: 'Hours'
                        }
                    }
                },
                plugins: {
                    annotation: {
                        annotations: {
                            line1: {
                                type: 'line',
                                yMin: 8,
                                yMax: 8,
                                borderColor: 'rgb(159, 116, 184)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                            }
                        }
                    }
                }
            }
        };

        const ctx = document.getElementById('sleepChart').getContext('2d');
        if (sleepChart) {
            sleepChart.destroy(); // Destroy the existing chart instance
        }
        sleepChart = new Chart(ctx, config); // Create a new chart instance
    }

    document.getElementById('leftArrowSleep').onclick = function() {
        sleepStartDate.setDate(sleepStartDate.getDate() - 7);
        buildSleepChart();
    }

    document.getElementById('rightArrowSleep').onclick = function() {
        sleepStartDate.setDate(sleepStartDate.getDate() + 7);
        buildSleepChart();
    }
</script>

<!-- Fruits and Veggies Modal Box -->
<div id="fruitsVeggiesModal" class="modal">
    <div class="modal-content">
        <p id="fruitsVeggiesModalTitle">Fruits and Veggies History</p>
        <div class="modal-buttons">
            <button id="leftArrowFruitsVeggies" class="arrow-button">&larr;</button>
            <button id="rightArrowFruitsVeggies" class="arrow-button">&rarr;</button>
        </div>
        <canvas id="fruitsVeggiesChart"></canvas>
    </div>
</div>
<script>
    let fruitsVeggiesStartDate = new Date();
    fruitsVeggiesStartDate.setDate(fruitsVeggiesStartDate.getDate() - 42); // Start date 6 weeks ago
    let fruitsVeggiesChart; // Reference to the chart instance
    let currentType = 'fruit'; // Default type

    function buildFruitsVeggiesChart(type) {
        if (type == "fruit" || type == "vegetable") {
            currentType = type; // Update the current type
        }
        else {
            type = currentType; // Use the current type
        }
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log('dailyData:', dailyData);

        // Filter the dailyData to include only entries within the date range
        const filteredData = Object.entries(dailyData).filter(([dateString, _]) => {
            const date = new Date(dateString);
            return date >= fruitsVeggiesStartDate && date <= new Date();
        });

        // Sort the filtered data by date
        filteredData.sort((a, b) => new Date(a[0]) - new Date(b[0]));

        // Extract dates and values based on the type (fruit or vegetable)
        const dates = filteredData.map(entry => entry[0]);
        const values = filteredData.map(entry => entry[1][type]);

        const data = {
            labels: dates,
            datasets: [{
                label: type.charAt(0).toUpperCase() + type.slice(1),
                data: values,
                fill: true,
                borderColor: type === 'fruit' ? 'rgb(255, 50, 50)' : 'rgb(50, 200, 50)',
                tension: 0.1,
                backgroundColor: type === 'fruit' ? 'rgba(255, 50, 50, 0.2)' : 'rgba(50, 200, 50, 0.2)' // Adjust for shading
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        title: {
                            display: true,
                            text: 'Date'
                        }
                    },
                    y: {
                        beginAtZero: true, // Always start y-axis at zero
                        min: 0, // Ensure y-axis starts at zero
                        max: 14, // Set max value for y-axis
                        title: {
                            display: true,
                            text: 'Servings'
                        }
                    }
                },
                plugins: {
                    annotation: {
                        annotations: {
                            line1: {
                                type: 'line',
                                yMin: 5,
                                yMax: 5,
                                borderColor: 'rgb(220, 220, 220)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                            }
                        }
                    }
                }
            }
        };

        const ctx = document.getElementById('fruitsVeggiesChart').getContext('2d');
        if (fruitsVeggiesChart) {
            fruitsVeggiesChart.destroy(); // Destroy the existing chart instance
        }
        fruitsVeggiesChart = new Chart(ctx, config); // Create a new chart instance
    }

    document.getElementById('percentageBox34').onclick = function() {
        document.getElementById('fruitsVeggiesModal').style.display = "block";
        buildFruitsVeggiesChart('fruit');
    }

    document.getElementById('percentageBox35').onclick = function() {
        document.getElementById('fruitsVeggiesModal').style.display = "block";
        buildFruitsVeggiesChart('vegetable');
    }

    document.getElementById('leftArrowFruitsVeggies').onclick = function() {
        fruitsVeggiesStartDate.setDate(fruitsVeggiesStartDate.getDate() - 7);
        buildFruitsVeggiesChart(document.getElementById('fruitsVeggiesModalTitle').innerText.toLowerCase());
    }

    document.getElementById('rightArrowFruitsVeggies').onclick = function() {
        fruitsVeggiesStartDate.setDate(fruitsVeggiesStartDate.getDate() + 7);
        buildFruitsVeggiesChart(document.getElementById('fruitsVeggiesModalTitle').innerText.toLowerCase());
    }
</script>

<!-- Stress and Motivation Modal Box -->
<div id="stressMotivationModal" class="modal">
    <div class="modal-content">
        <p id="stressMotivationModalTitle">Stress and Motivation History</p>
        <div class="modal-buttons">
            <button id="leftArrowStressMotivation" class="arrow-button">&larr;</button>
            <button id="rightArrowStressMotivation" class="arrow-button">&rarr;</button>
        </div>
        <canvas id="stressMotivationChart"></canvas>
    </div>
</div>
<script>
    let stressMotivationStartDate = new Date();
    stressMotivationStartDate.setDate(stressMotivationStartDate.getDate() - 42); // Start date 6 weeks ago
    let stressMotivationChart; // Reference to the chart instance
    let currentTypeSM = 'stress'; // Default type

    function buildStressMotivationChart(type) {
        currentTypeSM = type; // Update the current type
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log('dailyData:', dailyData);

        // Filter the dailyData to include only entries within the date range
        const filteredData = Object.entries(dailyData).filter(([dateString, _]) => {
            const date = new Date(dateString);
            return date >= stressMotivationStartDate && date <= new Date();
        });

        // Sort the filtered data by date
        filteredData.sort((a, b) => new Date(a[0]) - new Date(b[0]));

        // Extract dates and values based on the type (stress or motivation)
        const dates = filteredData.map(entry => entry[0]);
        const values = filteredData.map(entry => entry[1][type]);

        const data = {
            labels: dates,
            datasets: [{
                label: type.charAt(0).toUpperCase() + type.slice(1),
                data: values,
                fill: true,
                borderColor: type === 'stress' ? 'rgb(255, 99, 132)' : 'rgb(75, 192, 192)',
                tension: 0.1,
                backgroundColor: type === 'stress' ? 'rgba(255, 99, 132, 0.2)' : 'rgba(75, 192, 192, 0.2)' // Adjust for shading
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        title: {
                            display: true,
                            text: 'Date'
                        }
                    },
                    y: {
                        beginAtZero: true, // Always start y-axis at zero
                        min: 0, // Ensure y-axis starts at zero
                        max: 5, // Set max value for y-axis
                        title: {
                            display: true,
                            text: 'Level'
                        }
                    }
                }
            }
        };

        const ctx = document.getElementById('stressMotivationChart').getContext('2d');
        if (stressMotivationChart) {
            stressMotivationChart.destroy(); // Destroy the existing chart instance
        }
        stressMotivationChart = new Chart(ctx, config); // Create a new chart instance
    }

    document.getElementById('percentageBox11').onclick = function() {
        document.getElementById('stressMotivationModal').style.display = "block";
        buildStressMotivationChart('stress');
    }

    document.getElementById('percentageBox12').onclick = function() {
        document.getElementById('stressMotivationModal').style.display = "block";
        buildStressMotivationChart('motivation');
    }

    document.getElementById('leftArrowStressMotivation').onclick = function() {
        stressMotivationStartDate.setDate(stressMotivationStartDate.getDate() - 7);
        buildStressMotivationChart(currentTypeSM);
    }

    document.getElementById('rightArrowStressMotivation').onclick = function() {
        stressMotivationStartDate.setDate(stressMotivationStartDate.getDate() + 7);
        buildStressMotivationChart(currentTypeSM);
    }
</script>

<!-- Soreness, Fatigue, Illness, and Injury Modal Box -->
<div id="sorenessFatigueIllnessInjuryModal" class="modal">
    <div class="modal-content">
        <p id="sorenessFatigueIllnessInjuryModalTitle">Soreness, Fatigue, Illness, and Injury History</p>
        <div class="modal-buttons">
            <button id="leftArrowSorenessFatigueIllnessInjury" class="arrow-button">&larr;</button>
            <button id="rightArrowSorenessFatigueIllnessInjury" class="arrow-button">&rarr;</button>
        </div>
        <canvas id="sorenessFatigueIllnessInjuryChart"></canvas>
    </div>
</div>
<script>
    let sorenessFatigueIllnessInjuryStartDate = new Date();
    sorenessFatigueIllnessInjuryStartDate.setDate(sorenessFatigueIllnessInjuryStartDate.getDate() - 42); // Start date 6 weeks ago
    let sorenessFatigueIllnessInjuryChart; // Reference to the chart instance
    let currentTypeSFII = 'soreness'; // Default type

    function buildSorenessFatigueIllnessInjuryChart(type) {
        currentTypeSFII = type; // Update the current type
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log('dailyData:', dailyData);

        // Filter the dailyData to include only entries within the date range
        const filteredData = Object.entries(dailyData).filter(([dateString, _]) => {
            const date = new Date(dateString);
            return date >= sorenessFatigueIllnessInjuryStartDate && date <= new Date();
        });

        // Sort the filtered data by date
        filteredData.sort((a, b) => new Date(a[0]) - new Date(b[0]));

        // Extract dates and values based on the type (soreness, fatigue, illness, or injury)
        const dates = filteredData.map(entry => entry[0]);
        const values = filteredData.map(entry => entry[1][type]);

        const data = {
            labels: dates,
            datasets: [{
                label: type.charAt(0).toUpperCase() + type.slice(1),
                data: values,
                fill: true,
                borderColor: type === 'soreness' ? 'rgb(255, 200, 200)' :
                            type === 'fatigue' ? 'rgb(255, 159, 64)' :
                            type === 'illness' ? 'rgb(54, 162, 235)' :
                            'rgb(168, 50, 80)',
                tension: 0.1,
                backgroundColor: type === 'soreness' ? 'rgba(255, 200, 200, 0.2)' :
                                type === 'fatigue' ? 'rgba(255, 159, 64, 0.2)' :
                                type === 'illness' ? 'rgba(54, 162, 235, 0.2)' :
                                'rgba(168, 50, 80, 0.2)' // Adjust for shading
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        title: {
                            display: true,
                            text: 'Date'
                        }
                    },
                    y: {
                        beginAtZero: true, // Always start y-axis at zero
                        min: 0, // Ensure y-axis starts at zero
                        max: 3, // Set max value for y-axis
                        title: {
                            display: true,
                            text: 'Grade'
                        }
                    }
                },
                plugins: {
                    annotation: {
                        annotations: {
                            line1: {
                                type: 'line',
                                yMin: 1.5,
                                yMax: 1.5,
                                borderColor: 'rgb(48, 45, 56)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                            }
                        }
                    }
                }
            }
        };

        const ctx = document.getElementById('sorenessFatigueIllnessInjuryChart').getContext('2d');
        if (sorenessFatigueIllnessInjuryChart) {
            sorenessFatigueIllnessInjuryChart.destroy(); // Destroy the existing chart instance
        }
        sorenessFatigueIllnessInjuryChart = new Chart(ctx, config); // Create a new chart instance
    }

    document.getElementById('percentageBox24').onclick = function() {
        document.getElementById('sorenessFatigueIllnessInjuryModal').style.display = "block";
        buildSorenessFatigueIllnessInjuryChart('soreness');
    }

    document.getElementById('percentageBox25').onclick = function() {
        document.getElementById('sorenessFatigueIllnessInjuryModal').style.display = "block";
        buildSorenessFatigueIllnessInjuryChart('fatigue');
    }

    document.getElementById('percentageBox26').onclick = function() {
        document.getElementById('sorenessFatigueIllnessInjuryModal').style.display = "block";
        buildSorenessFatigueIllnessInjuryChart('illness');
    }

    document.getElementById('percentageBox27').onclick = function() {
        document.getElementById('sorenessFatigueIllnessInjuryModal').style.display = "block";
        buildSorenessFatigueIllnessInjuryChart('injury');
    }

    document.getElementById('leftArrowSorenessFatigueIllnessInjury').onclick = function() {
        sorenessFatigueIllnessInjuryStartDate.setDate(sorenessFatigueIllnessInjuryStartDate.getDate() - 7);
        buildSorenessFatigueIllnessInjuryChart(currentTypeSFII);
    }

    document.getElementById('rightArrowSorenessFatigueIllnessInjury').onclick = function() {
        sorenessFatigueIllnessInjuryStartDate.setDate(sorenessFatigueIllnessInjuryStartDate.getDate() + 7);
        buildSorenessFatigueIllnessInjuryChart(currentTypeSFII);
    }
</script>

<!-- Standard Modal Box -->
    <div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
            <p id="modalTitle">Habit History for Stretch</p>
        <button id="scrollUp" class="scroll-button">↑</button>
            <div class="calendar-grid">
            <!-- Squares will be generated by JavaScript -->
        </div>
        <button id="scrollDown" class="scroll-button">↓</button>
    </div>
</div>

<script>
    document.getElementById('percentageBox').onclick = function() {
            document.getElementById('myModal').style.display = "block";
    }

        document.getElementsByClassName('close')[0].onclick = function() {
            document.getElementById('myModal').style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == document.getElementById('myModal')) {
            document.getElementById('myModal').style.display = "none";
        }
        if (event.target == document.getElementById('hydrationModal')) {
            document.getElementById('hydrationModal').style.display = "none";
        }
        if (event.target == document.getElementById('sleepModal')) {
            document.getElementById('sleepModal').style.display = "none";
        }
        if (event.target == document.getElementById('fruitsVeggiesModal')) {
            document.getElementById('fruitsVeggiesModal').style.display = "none";
        }
        if (event.target == document.getElementById('stressMotivationModal')) {
            document.getElementById('stressMotivationModal').style.display = "none";
        }
        if (event.target == document.getElementById('sorenessFatigueIllnessInjuryModal')) {
            document.getElementById('sorenessFatigueIllnessInjuryModal').style.display = "none";
        }
    }
</script>

<script>
    document.getElementById('scrollUp').addEventListener('click', function() {
        const grid = document.getElementById('calendarGrid');
        grid.scrollBy(0, -40); // Adjust the scroll amount as needed
    });

    document.getElementById('scrollDown').addEventListener('click', function() {
        const grid = document.getElementById('calendarGrid');
        grid.scrollBy(0, 40); // Adjust the scroll amount as needed
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const habits = [
            { id: 'percentageBox', label: 'Stretch', key: 'stretch' },
            { id: 'percentageBox2', label: 'Mobility', key: 'mobility' },
            { id: 'percentageBox3', label: 'Coordination', key: 'coordination' },
            { id: 'percentageBox4', label: 'Balance', key: 'balance' },
            { id: 'percentageBox5', label: 'Speed', key: 'speed' },
            { id: 'percentageBox6', label: 'Agility', key: 'agility' },
            { id: 'percentageBox7', label: 'Breathwork', key: 'breathwork' },
            { id: 'percentageBox8', label: 'Strength', key: 'strength' },
            { id: 'percentageBox9', label: 'Power', key: 'power' },
            { id: 'percentageBox10', label: 'Reaction', key: 'reaction' },
            // { id: 'percentageBox11', label: 'Stress', key: 'stress' },
            // { id: 'percentageBox12', label: 'Motivation', key: 'motivation' },
            { id: 'percentageBox13', label: 'Read', key: 'read' },
            { id: 'percentageBox14', label: 'Kindness', key: 'kindness' },
            { id: 'percentageBox15', label: 'Visualize', key: 'visualize' },
            { id: 'percentageBox16', label: 'Meditate', key: 'medidate' },
            { id: 'percentageBox17', label: 'Focus', key: 'focus' },
            { id: 'percentageBox18', label: 'Socialize', key: 'be_social' },
            // { id: 'percentageBox19', label: 'Sleep', key: 'sleep' },
            { id: 'percentageBox20', label: 'Massage', key: 'massage' },
            { id: 'percentageBox21', label: 'NormaTec+', key: 'normatec_plus' },
            { id: 'percentageBox22', label: 'Ice', key: 'ice' },
            { id: 'percentageBox23', label: 'Altitude', key: 'altitude' },
            // { id: 'percentageBox24', label: 'Soreness', key: 'soreness' },
            // { id: 'percentageBox25', label: 'Fatigue', key: 'fatigue' },
            // { id: 'percentageBox26', label: 'Illness', key: 'illness' },
            // { id: 'percentageBox27', label: 'Injury', key: 'injury' },
            // { id: 'percentageBox28', label: 'Hydration', key: 'hydration' },
            { id: 'percentageBox29', label: 'No Sweets', key: 'no_sweets' },
            { id: 'percentageBox30', label: 'B Alanine', key: 'b_alanine' },
            { id: 'percentageBox31', label: 'Creatine', key: 'creatine' },
            { id: 'percentageBox32', label: 'Vitamin D', key: 'vitamin_d' },
            // { id: 'percentageBox33', label: 'Anti-Ox', key: 'anti_ox' },
            // { id: 'percentageBox34', label: 'Fruit', key: 'fruit' },
            // { id: 'percentageBox35', label: 'Veggie', key: 'veggie' }
        ];

        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let offset = 0;
        let currentHabitKey = '';

        // Get the daily data from the template context
        const dailyData = JSON.parse('{{ daily_data|escapejs }}');
        console.log("Daily Data:", dailyData);

        function generateCalendar(month, year, offset, habitKey) {
            const calendarGrid = document.querySelector('.calendar-grid');
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();

            // Clear existing squares
            calendarGrid.innerHTML = '';

            // Fill the squares with dates
            for (let i = 0; i < 42; i++) {
                const square = document.createElement('div');
                square.classList.add('square');

                const dateIndex = i - firstDay + 1 + offset * 7;
                let date;

                if (dateIndex < 1) {
                    // Dates from the previous month
                    date = new Date(year, month - 1, daysInPrevMonth + dateIndex);
                    square.textContent = date.getDate() === 1 ? date.toLocaleString('default', { month: 'short' }) : date.getDate();
                } else if (dateIndex > daysInMonth) {
                    // Dates from the next month
                    date = new Date(year, month + 1, dateIndex - daysInMonth);
                    square.textContent = date.getDate() === 1 ? date.toLocaleString('default', { month: 'short' }) : date.getDate();
                } else {
                    // Dates from the current month
                    date = new Date(year, month, dateIndex);
                    square.textContent = dateIndex === 1 ? date.toLocaleString('default', { month: 'short' }) : dateIndex;
                }

                // Format the date as a string
                const dateString = date.toISOString().split('T')[0];
                console.log("Processing date:", dateString);

                // Check if the date is in the dailyData object
                if (dailyData.hasOwnProperty(dateString)) {
                    const habitValue = dailyData[dateString][habitKey];
                    square.style.backgroundColor = habitValue ? 'green' : 'red';
                }

                calendarGrid.appendChild(square);
            }
        }

        habits.forEach(habit => {
            const habitElement = document.getElementById(habit.id);
            if (habitElement) {
                habitElement.onclick = function() {
                    const modalTitle = document.getElementById('modalTitle');
                    if (modalTitle) {
                        modalTitle.textContent = `Habit History for ${habit.label}`;
                    } else {
                        console.error('Element with ID modalTitle not found.');
                    }
                    currentHabitKey = habit.key;
                    generateCalendar(currentMonth, currentYear, offset, currentHabitKey);
                    document.getElementById('myModal').style.display = "block";
                };
            } else {
                console.error(`Element with ID ${habit.id} not found.`);
            }
        });

        document.getElementById('scrollUp').addEventListener('click', function() {
            offset -= 1;
            generateCalendar(currentMonth, currentYear, offset, currentHabitKey);
        });

        document.getElementById('scrollDown').addEventListener('click', function() {
            offset += 1;
            generateCalendar(currentMonth, currentYear, offset, currentHabitKey);
        });
    });
</script>
{% endblock %}